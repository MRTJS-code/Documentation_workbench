| Category | Current behaviour | Risk / Impact | Suggested enhancement | Effort | Notes / Dependencies |
| --- | --- | --- | --- | --- | --- |
| Reliability | No max-attempt or dead-letter handling; retries depend on manually setting `EVENT_STATUS` to `RETRY`. | Repeated failures can loop indefinitely or be missed. | Add attempt counter in `ETL_EVENT` (or separate table) and route to `Error`/dead-letter after N attempts with a follow-up queue. | M | Requires schema change and orchestrator updates. |
| Observability | OnError handler email is disabled; status/comment updates are minimal. | Failures may be unnoticed; limited context for support. | Enable SMTP task with environment-driven recipients; enrich `EVENT_COMMENT` with task name/error code and store in a dedicated log table. | S | Needs SMTP configuration and handler tweak. |
| Performance | Poller scans `NEW/RETRY/WAIT` every run without batching; no limit on concurrent events. | Potential long-run queues or contention if many events accumulate. | Add batch size and optional `TOP (N)` ordering by `EVENT_DATE_CREATE`; consider status lock (e.g., set to `IN PROGRESS`) upon dequeue. | M | SQL change in "Get Events to Process" and variable mapping. |
| Maintainability | Deputy upload packages embed HTTP logic; configuration (tokens/URLs) only in project params. | Hard to rotate secrets or switch endpoints; risk of secret sprawl. | Externalize Deputy credentials to SSIS environment variables and document rotation steps; add token-expiry alert. | S | Dependent on deployment environment capabilities. |
| Maintainability | `2 Stage Deputy` / `4 Full Extract Build` logic is opaque; no unit checks. | Hard to validate schema changes or new event types. | Add lightweight data validation steps (row counts, key NULL checks) after staging/extract, with thresholds configurable via `ETL_EVENT_VARIABLES`. | M | Could be implemented with Execute SQL tasks and fail precedence. |
| Security | Connection strings in project params include usernames; passwords stored as sensitive values. | Risk of accidental exposure if exported. | Ensure SSIS environments provide secrets; restrict config export; audit who can read catalog environments. | S | Policy/process action rather than code. |
